(this.webpackJsonppodcastprioritizer=this.webpackJsonppodcastprioritizer||[]).push([[0],{23:function(e,t,a){},29:function(e,t,a){e.exports=a(55)},34:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(27),o=a.n(r),i=(a(34),a(28)),l=a(2),c=a(3),u=a(7),m=a(5),p=a(4),d=a(6),h=a.n(d),g=(a(23),function(e){return s.a.createElement("div",{className:"transitMap"},s.a.createElement("ul",{className:"transit",style:{display:e.transitTime.bicycle&&e.transitTime.fastest&&e.transitTime.pedestrian?"block":"none"}},e.transitTime.pedestrian<=1?s.a.createElement("li",null,s.a.createElement("span",{className:"mode"},s.a.createElement("i",{className:"fas fa-walking"}))," ",e.transitTime.pedestrian," minute"):s.a.createElement("li",null,s.a.createElement("span",{className:"mode"},s.a.createElement("i",{className:"fas fa-walking"}))," ",e.transitTime.pedestrian," minutes"),e.transitTime.bicycle<=1?s.a.createElement("li",null," ",s.a.createElement("span",{className:"mode"},s.a.createElement("i",{className:"fas fa-biking"})),e.transitTime.bicycle," minute"):s.a.createElement("li",null,s.a.createElement("span",{className:"mode"},s.a.createElement("i",{className:"fas fa-biking"})),e.transitTime.bicycle," minutes"),e.transitTime.fastest<=1?s.a.createElement("li",null,s.a.createElement("span",{className:"mode"},s.a.createElement("i",{className:"fas fa-car"})),e.transitTime.fastest," minute"):s.a.createElement("li",null,s.a.createElement("span",{className:"mode"},s.a.createElement("i",{className:"fas fa-car"})),e.transitTime.fastest," minutes")),s.a.createElement("div",{className:"map"},s.a.createElement("img",{src:e.map})))}),E=a(9),f=function(e){return s.a.createElement("div",{className:"popupBack"},s.a.createElement("div",{className:"popup"},s.a.createElement("p",null,"One of the input fields is not valid or distance is too huge"),s.a.createElement("button",{onClick:e.hideErrorWindow},"CLOSE")))},v=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChangeText=function(t){t.preventDefault(),e.setState(Object(E.a)({},t.target.name,t.target.value))},e.selectChange=function(t){console.log(t.target.options[t.target.selectedIndex].text),e.setState({podcastInput:t.target.options[t.target.selectedIndex].text,genreSelected:t.target.value})},e.state={podcastInput:"",userInputFrom:"",userInputTo:"",genres:[],genreSelected:""},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;h()({url:"https://listen-api.listennotes.com/api/v2/genres",method:"GET",responseType:"json",headers:{"X-ListenAPI-Key":"d45d36385df142229be4941f98e07c20"}}).then((function(t){e.setState({genres:t.data.genres})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.hideErrorWindow,n=t.closeError,r=t.error.popUpError;return s.a.createElement("div",null,s.a.createElement("form",null,s.a.createElement("section",{className:"travelDetails"},s.a.createElement("h2",null,s.a.createElement("i",{className:"fas fa-map-marker-alt","aria-label":"Icon of a location pin"})," Type in your travel details"),s.a.createElement("div",{className:"startingPoint"},s.a.createElement("label",{htmlFor:"userInputFrom"},"Starting Point:"),s.a.createElement("input",{type:"text",name:"userInputFrom",id:"userInputFrom",value:this.state.userInputFrom,onChange:this.handleChangeText,placeholder:"12 Bloor Street Toronto"})),s.a.createElement("div",{className:"destination"},s.a.createElement("label",{htmlFor:"userInputTo"},"Destination:"),s.a.createElement("input",{type:"text",name:"userInputTo",id:"userInputTo",value:this.state.userInputTo,onChange:this.handleChangeText,placeholder:"11 Yonge Street Toronto"}))),s.a.createElement("section",{className:"podcastDetails"},s.a.createElement("div",{className:"podcastSearch"},s.a.createElement("h2",null,s.a.createElement("i",{className:"fas fa-podcast","aria-label":"Icon of a microphone"})," Type in your podcast details"),s.a.createElement("label",{htmlFor:"podcastInput"},"Podcast Search:"),s.a.createElement("input",{onChange:this.handleChangeText,type:"text",name:"podcastInput",id:"podcastInput",value:this.state.podcastInput,placeholder:"ex: genre, title, creator","aria-label":"example: genre, title, creator"})),s.a.createElement("div",{className:"podcastDropDown"},s.a.createElement("p",null,"Or pick a genre:"),s.a.createElement("select",{type:"genresSelect",id:"genreSelect",name:"genreSelect",onChange:this.selectChange},s.a.createElement("option",{value:""},"Please select an genre"),this.state.genres.map((function(e){return s.a.createElement("option",{value:e.id,key:e.id},e.name)}))))),r?s.a.createElement(f,{hideErrorWindow:a}):null,s.a.createElement("button",{className:"formButton",onClick:function(t){t.preventDefault(),e.state.podcastInput&&e.state.userInputFrom&&e.state.userInputTo?(e.props.inputText(t,e.state.podcastInput,e.state.genreSelected),e.props.handleSubmit(t,e.state.userInputFrom,e.state.userInputTo),e.setState({podcastInput:"",userInputFrom:"",userInputTo:"",genreSelected:""})):n()}},"Find suggestions!")))}}]),a}(n.Component),b=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showHideSuggestion,a=e.stateSuggestion,n=e.propToprop,r=n.length,o=n.transitTime;return s.a.createElement("div",{onClick:t,className:"suggestion",style:{display:a.displaySuggestion?"block":"none"}},Math.round(r/60)<=1?s.a.createElement("p",null,"podcast length:",Math.round(r/60)," minute "):s.a.createElement("p",null,"podcast length:",Math.round(r/60)," minutes"),s.a.createElement("p",null," walk:",o.pedestrian," minutes"),s.a.createElement("p",null,"bike:",o.bicycle," minutes"),s.a.createElement("p",null,"drive:",o.fastest," minutes"),r/60<o.fastest?s.a.createElement("p",null,"suggestion: you should drive"):r/60<o.bicycle?s.a.createElement("p",null,"suggestion: you should bike"):s.a.createElement("p",null,"suggestion: you should walk"))}}]),a}(n.Component),y=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).showHideSuggestion=function(t){t.preventDefault(),e.setState({displaySuggestion:!e.state.displaySuggestion})},e.state={displaySuggestion:!1},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.transitTime,e.title),a=(e.description,e.length,e.image),n=e.savePodcast,r=e.audio,o=e.id;return s.a.createElement("li",null,s.a.createElement("button",{onClick:this.showHideSuggestion,className:"podcastButton"},s.a.createElement("div",{className:"thumbnailWrapper"},s.a.createElement("img",{src:a,alt:t}),s.a.createElement("p",null,t))),s.a.createElement("button",{onClick:function(e){n(e,t,a,r,o)}},"Save podcast"),s.a.createElement(b,{showHideSuggestion:this.showHideSuggestion,stateSuggestion:this.state,propToprop:this.props}))}}]),a}(n.Component),I=function(e){var t=e.title,a=e.audio,n=e.image,r=e.id,o=e.deletePodcast;return s.a.createElement("li",{className:"podcastItem"},s.a.createElement("div",{className:"podcastNameImage"},s.a.createElement("div",{className:"podcastImageWrapper"},s.a.createElement("img",{src:n,alt:t})),s.a.createElement("div",{className:"podcastNameDelete"},s.a.createElement("p",null,t),s.a.createElement("button",{onClick:function(e){o(e,r)}},"X"))),s.a.createElement("audio",{controls:!0,src:a},"Your browser does not support the audio element."))},S=function(e){var t=e.user,a=e.login,n=e.logout,r=e.podcastList,o=e.deletePodcast;return s.a.createElement("div",{className:"podcastMenu"},t?s.a.createElement("ul",{className:"podcastUserList"},r.map((function(e){var t=e.key,a=e.podcasts;return s.a.createElement(I,{key:t,title:a.title,image:a.image,audio:a.audio,deletePodcast:o,id:t})}))):null,t?s.a.createElement("button",{className:"loginButton",onClick:n},"Log Out"):s.a.createElement("button",{onClick:a},"Log In "))},T=a(12),k=a.n(T);a(51),a(53);k.a.initializeApp({apiKey:"AIzaSyBA4ai_gR73-t0M4UwfozSqZG4kFu7k3GA",authDomain:"podcastprioritizer.firebaseapp.com",databaseURL:"https://podcastprioritizer.firebaseio.com",projectId:"podcastprioritizer",storageBucket:"podcastprioritizer.appspot.com",messagingSenderId:"703854841662",appId:"1:703854841662:web:25566ffa1b31854dd7e66f"});var w=k.a,N=function(){return s.a.createElement("header",null,s.a.createElement("h1",null,"Podcast Prioritizer ",s.a.createElement("i",{className:"fas fa-headphones","aria-label":"Icon of headphones"})),s.a.createElement("p",null,"Can't decide which podcast to listen to on your next journey? Not sure whether you should walk, bike or drive? Use this web app by inputting your 'Starting Point', 'Destination', and a podcast search term to determine which podcast you should listen to, and how you should get there."))},C=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).login=function(){var t=new w.auth.GoogleAuthProvider;w.auth().signInWithPopup(t).then((function(t){var a=t.user;e.setState({user:a,userId:a.uid})}))},e.logout=function(){w.auth().signOut().then((function(){e.setState({user:null,userId:"",podcastList:[]})}))},e.savePodcast=function(t,a,n,s,r){var o=w.database().ref();t.preventDefault();var i={title:a,image:n,audio:s};o.child("".concat(e.state.userId,"/").concat(r)).set(i)},e.deletePodcast=function(t,a){t.preventDefault(),w.database().ref(e.state.userId).child(a).remove()},e.podcastMenu=function(){e.setState({menuOpen:!e.state.menuOpen})},e.timeChange=function(e){var t=e.split(":");return parseInt(60*t[0])+parseInt(t[1])+parseInt(t[2]/60)},e.handleSubmit=function(t,a,n){t.preventDefault(),h()({url:"https://www.mapquestapi.com/staticmap/v5/map",method:"GET",responseType:"json",params:{key:"x3MrPIPmomzlRE4OXlE1fjsepd4chw3q",format:"png",start:a,end:n,size:"200,200",countryCode:"CA",scalebar:!0,margin:40}}).then((function(t){e.setState({mapUrl:t.request.responseURL})})),e.state.modes.forEach((function(t){h()({url:"https://www.mapquestapi.com/directions/v2/route",method:"GET",responseType:"json",params:{key:"x3MrPIPmomzlRE4OXlE1fjsepd4chw3q",from:a,to:n,routeType:t}}).then((function(a){a.data.route.distance>100&&e.setState({popUpError:!0});var n=Object(i.a)({},e.state.transitTime);n[t]=e.timeChange(a.data.route.formattedTime),e.setState({transitTime:n})})).catch((function(e){console.log(e)}))}))},e.podcastCall=function(t,a,n){t.preventDefault(),h()({url:"https://listen-api.listennotes.com/api/v2/search",method:"GET",responseType:"json",headers:{"X-ListenAPI-Key":"d45d36385df142229be4941f98e07c20"},params:{q:a,len_max:e.state.transitTime.pedestrian,genre_ids:n}}).then((function(t){e.setState({podcasts:t.data.results})}))},e.clearResults=function(){e.setState({mapUrl:"",transitTime:{},podcasts:[]}),window.scrollTo(0,0)},e.state={modes:["bicycle","pedestrian","fastest"],genres:[],transitTime:{},podcasts:[],mapUrl:"",user:null,userId:"anonymous",podcastList:[],popUpError:!1,menuOpen:!1},e.hideError=e.hideError.bind(Object(u.a)(e)),e.showError=e.showError.bind(Object(u.a)(e)),e}return Object(c.a)(a,[{key:"hideError",value:function(){this.setState({popUpError:!1})}},{key:"showError",value:function(){this.setState({popUpError:!0})}},{key:"componentDidMount",value:function(){var e=this;w.auth().onAuthStateChanged((function(t){t&&e.setState({user:t}),e.setState({userId:e.state.user.uid}),w.database().ref(e.state.userId).on("value",(function(t){var a=[],n=t.val();for(var s in n)a.push({key:s,podcasts:n[s]});e.setState({podcastList:a})}))}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"wrapper"},s.a.createElement(N,null),s.a.createElement("button",{className:"menuButton",onClick:this.podcastMenu},s.a.createElement("i",{className:"fas fa-bars"})),this.state.menuOpen?s.a.createElement(S,{key:"podcastMenu",user:this.state.user,podcastList:this.state.podcastList,logout:this.logout,login:this.login,deletePodcast:this.deletePodcast}):null,s.a.createElement(v,{inputText:this.podcastCall,handleSubmit:this.handleSubmit,error:this.state,hideErrorWindow:this.hideError,closeError:this.showError}),this.state.popUpError?s.a.createElement(f,{hideErrorWindow:this.hideError}):null,s.a.createElement(g,{map:this.state.mapUrl,transitTime:this.state.transitTime}),s.a.createElement("ul",null,this.state.podcasts.map((function(t){var a=t.id,n=t.image,r=t.title_original,o=t.description_original,i=t.audio_length_sec,l=t.audio;return s.a.createElement(y,{key:a,image:n,title:r,description:o,length:i,transitTime:e.state.transitTime,savePodcast:e.savePodcast,audio:l,id:a})}))),0!==this.state.podcasts.length?s.a.createElement("button",{onClick:this.clearResults},"Start over"):null),s.a.createElement("footer",null,"Copyright \xa9 Podcast Prioritizer | Made at Juno College"))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.a117f72c.chunk.js.map