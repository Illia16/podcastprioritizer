(this.webpackJsonppodcastprioritizer=this.webpackJsonppodcastprioritizer||[]).push([[0],{22:function(e,t,a){},28:function(e,t,a){e.exports=a(54)},33:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(26),r=a.n(i),o=(a(33),a(27)),l=a(2),c=a(3),u=a(5),p=a(4),m=a(6),d=a.n(m),h=(a(22),a(8)),g=function(e){return s.a.createElement("div",{className:"popupBack"},s.a.createElement("div",{className:"popup"},s.a.createElement("p",null,"Error")))},f=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChangeText=function(t){t.preventDefault(),e.setState(Object(h.a)({},t.target.name,t.target.value))},e.selectChange=function(t){console.log(t.target.options[t.target.selectedIndex].text),e.setState({podcastInput:t.target.options[t.target.selectedIndex].text,genreSelected:t.target.value})},e.state={podcastInput:"",userInputFrom:"",userInputTo:"",genres:[],genreSelected:"",popUpError:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;d()({url:"https://listen-api.listennotes.com/api/v2/genres",method:"GET",responseType:"json",headers:{"X-ListenAPI-Key":"d45d36385df142229be4941f98e07c20"}}).then((function(t){e.setState({genres:t.data.genres})}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("form",null,s.a.createElement("label",{htmlFor:"userInputFrom"},"From"),s.a.createElement("input",{type:"text",name:"userInputFrom",id:"userInputFrom",value:this.state.userInputFrom,onChange:this.handleChangeText}),s.a.createElement("label",{htmlFor:"userInputTo"},"To"),s.a.createElement("input",{type:"text",name:"userInputTo",id:"userInputTo",value:this.state.userInputTo,onChange:this.handleChangeText}),s.a.createElement("label",{htmlFor:"podcastInput"}),s.a.createElement("input",{onChange:this.handleChangeText,type:"text",name:"podcastInput",id:"podcastInput",value:this.state.podcastInput}),s.a.createElement("select",{type:"genresSelect",id:"genreSelect",name:"genreSelect",onChange:this.selectChange},s.a.createElement("option",{value:""},"Please select an genre"),this.state.genres.map((function(e){return s.a.createElement("option",{value:e.id,key:e.id},e.name)}))),this.state.popUpError?s.a.createElement(g,null):null,s.a.createElement("button",{onClick:function(t){t.preventDefault(),e.state.podcastInput&&e.state.userInputFrom&&e.state.userInputTo?(e.props.inputText(t,e.state.podcastInput,e.state.genreSelected),e.props.handleSubmit(t,e.state.userInputFrom,e.state.userInputTo)):(console.log("Error"),e.setState({popUpError:!0}))}},"Click me")))}}]),a}(n.Component),E=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showHideSuggestion,a=e.stateSuggestion,n=e.propToprop,i=n.length,r=n.transitTime;return s.a.createElement("div",{onClick:t,className:"suggestion",style:{display:a.displaySuggestion?"block":"none"}},Math.round(i/60)<=1?s.a.createElement("p",null,"podcast length:",Math.round(i/60)," minute "):s.a.createElement("p",null,"podcast length:",Math.round(i/60)," minutes"),s.a.createElement("p",null," walk:",r.pedestrian," minutes"),s.a.createElement("p",null,"bike:",r.bicycle," minutes"),s.a.createElement("p",null,"drive:",r.fastest," minutes"),i/60<r.fastest?s.a.createElement("p",null,"suggestion: you should drive"):i/60<r.bicycle?s.a.createElement("p",null,"suggestion: you should bike"):s.a.createElement("p",null,"suggestion: you should walk"))}}]),a}(n.Component),v=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).showHideSuggestion=function(t){t.preventDefault(),e.setState({displaySuggestion:!e.state.displaySuggestion})},e.state={displaySuggestion:!1},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.transitTime,e.title),a=(e.description,e.length,e.image),n=e.savePodcast,i=e.listenUrl,r=e.id;return s.a.createElement("li",null,s.a.createElement("button",{onClick:this.showHideSuggestion,className:"podcastButton"},s.a.createElement("div",{className:"thumbnailWrapper"},s.a.createElement("img",{src:a,alt:t}),s.a.createElement("p",null,t))),s.a.createElement("button",{onClick:function(e){n(e,t,a,i,r)}},"Save podcast"),s.a.createElement(E,{showHideSuggestion:this.showHideSuggestion,stateSuggestion:this.state,propToprop:this.props}))}}]),a}(n.Component),b=function(e){var t=e.title,a=e.listenURL,n=e.image,i=e.id,r=e.deletePodcast;return s.a.createElement("li",{className:"podcastItem"},s.a.createElement("p",null,t),s.a.createElement("div",{className:"podcastImageWrapper"},s.a.createElement("img",{src:n,alt:t})),s.a.createElement("a",{href:a}),s.a.createElement("button",{onClick:function(e){r(e,i)}},"Delete"))},y=a(11),T=a.n(y);a(50),a(52);T.a.initializeApp({apiKey:"AIzaSyBA4ai_gR73-t0M4UwfozSqZG4kFu7k3GA",authDomain:"podcastprioritizer.firebaseapp.com",databaseURL:"https://podcastprioritizer.firebaseio.com",projectId:"podcastprioritizer",storageBucket:"podcastprioritizer.appspot.com",messagingSenderId:"703854841662",appId:"1:703854841662:web:25566ffa1b31854dd7e66f"});var I=T.a,k=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).login=function(){var t=new I.auth.GoogleAuthProvider;I.auth().signInWithPopup(t).then((function(t){var a=t.user;e.setState({user:a,userId:a.uid})}))},e.logout=function(){I.auth().signOut().then((function(){e.setState({user:null,userId:"",podcastList:[]})}))},e.savePodcast=function(t,a,n,s,i){var r=I.database().ref();t.preventDefault();var o={title:a,image:n,listenUrl:s};r.child("".concat(e.state.userId,"/").concat(i)).set(o)},e.deletePodcast=function(t,a){t.preventDefault(),I.database().ref(e.state.userId).child(a).remove()},e.timeChange=function(e){var t=e.split(":");return parseInt(60*t[0])+parseInt(t[1])+parseInt(t[2]/60)},e.handleSubmit=function(t,a,n){t.preventDefault(),d()({url:"https://www.mapquestapi.com/staticmap/v5/map",method:"GET",responseType:"json",params:{key:"x3MrPIPmomzlRE4OXlE1fjsepd4chw3q",format:"png",start:a,end:n,size:"200,200",countryCode:"CA",scalebar:!0,margin:40}}).then((function(t){console.log(t),e.setState({mapUrl:t.request.responseURL})})),e.state.modes.forEach((function(t){d()({url:"https://www.mapquestapi.com/directions/v2/route",method:"GET",responseType:"json",params:{key:"x3MrPIPmomzlRE4OXlE1fjsepd4chw3q",from:a,to:n,routeType:t,manMaps:!0}}).then((function(a){var n=Object(o.a)({},e.state.transitTime);n[t]=e.timeChange(a.data.route.formattedTime),e.setState({transitTime:n})})).catch((function(e){console.log(e)}))}))},e.podcastCall=function(t,a,n){t.preventDefault(),d()({url:"https://listen-api.listennotes.com/api/v2/search",method:"GET",responseType:"json",headers:{"X-ListenAPI-Key":"d45d36385df142229be4941f98e07c20"},params:{q:a,len_max:e.state.transitTime.pedestrian,genre_ids:n}}).then((function(t){console.log(t.data.results),e.setState({podcasts:t.data.results})}))},e.clearResults=function(){e.setState({podcasts:[]}),window.scrollTo(0,0)},e.state={modes:["bicycle","pedestrian","fastest"],genres:[],transitTime:{},podcasts:[],mapUrl:"",user:null,userId:"anonymous",podcastList:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;I.auth().onAuthStateChanged((function(t){t&&e.setState({user:t}),e.setState({userId:e.state.user.uid});var a=I.database().ref(e.state.userId);a.on("value",(function(t){console.log(a);var n=[],s=t.val();for(var i in s)n.push({key:i,podcasts:s[i]});e.setState({podcastList:n})}))}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App wrapper"},s.a.createElement("header",null,s.a.createElement("h1",null,"Podcast Prioritizer ",s.a.createElement("i",{className:"fas fa-headphones"})),s.a.createElement("p",null,"Can't decide which podcast to listen to on your next journey? Not sure whether you should walk, bike or drive? Use this web app by inputting your 'To', 'From', and a 'Podcast type' to determine which podcast you should listen to, and how you should get there.")),s.a.createElement("ul",null,this.state.podcastList.map((function(t){var a=t.key,n=t.podcasts;return s.a.createElement(b,{key:a,title:n.title,image:n.image,listenURL:n.listenURL,deletePodcast:e.deletePodcast,id:a})}))),this.state.user?s.a.createElement("button",{onClick:this.logout},"Log out"):s.a.createElement("button",{onClick:this.login},"Log In "),s.a.createElement(f,{inputText:this.podcastCall,handleSubmit:this.handleSubmit}),s.a.createElement("div",{className:"transitMap"},s.a.createElement("div",{className:"map"},s.a.createElement("img",{src:this.state.mapUrl})),s.a.createElement("ul",{className:"transit",style:{display:this.state.transitTime.bicycle&&this.state.transitTime.fastest&&this.state.transitTime.pedestrian?"block":"none"}},this.state.transitTime.pedestrian<=1?s.a.createElement("li",null,"walk time: ",this.state.transitTime.pedestrian," minute"):s.a.createElement("li",null,"walk time: ",this.state.transitTime.pedestrian," minutes"),this.state.transitTime.bicycle<=1?s.a.createElement("li",null,"bike time: ",this.state.transitTime.bicycle," minute"):s.a.createElement("li",null,"bike time: ",this.state.transitTime.bicycle," minutes"),this.state.transitTime.fastest<=1?s.a.createElement("li",null,"car time: ",this.state.transitTime.fastest," minute"):s.a.createElement("li",null,"car time: ",this.state.transitTime.fastest," minutes"))),s.a.createElement("ul",null,this.state.podcasts.map((function(t){var a=t.id,n=t.image,i=t.title_original,r=t.description_original,o=t.audio_length_sec,l=t.listennotes_url;return s.a.createElement(v,{key:a,image:n,title:i,description:r,length:o,transitTime:e.state.transitTime,savePodcast:e.savePodcast,listenUrl:l,id:a})}))),0!==this.state.podcasts.length?s.a.createElement("button",{onClick:this.clearResults},"Start over"):null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.cbdc4f90.chunk.js.map